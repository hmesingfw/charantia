(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d210fac"],{b9cb:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"margin-8 pu-padding",attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),e._v(" 人员信息列表\n        ")]),e._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.QueryParam}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.QueryParam.username,callback:function(t){e.$set(e.QueryParam,"username",t)},expression:"QueryParam.username"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.query(1)}}})],1),e._v(" "),a("el-form-item",{staticClass:"handle-button-right"},[a("transition",{attrs:{name:"el-zoom-in-center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.multipleSelection.length>0,expression:"multipleSelection.length>0"}],attrs:{type:"danger"},on:{click:e.delAll}},[e._v("批量删除")])],1),e._v(" "),a("el-button",{on:{click:function(t){return e.handleAdd()}}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.tableHeight,"header-row-class-name":"table-header-color"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"42"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"realname",label:"真实姓名","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.sex?"男":"女"))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号码","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"locked",label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticClass:"switchStyle",attrs:{"active-text":"启用","inactive-text":"锁定","active-value":0,"inactive-value":1},on:{change:function(a){return e.switchFlag(t.$index,t.row)}},model:{value:t.row.locked,callback:function(a){e.$set(t.row,"locked",a)},expression:"scope.row.locked"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleEditRole(t.row)}}},[e._v("分配角色")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleReset(t.row)}}},[e._v("重置密码")]),e._v(" "),a("el-button",{staticClass:"font-color-del",attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pu-pagination"},[a("el-pagination",{attrs:{"current-page":e.pagination.page,"page-sizes":[10,20,30,50],"page-size":e.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("dialog-model",{attrs:{title:"人员信息",type:e.requestType,"loading-button":e.loadingButton},on:{submit:e.handleUpdate,changeLoadingButton:function(t){e.loadingButton=!1}},model:{value:e.dialogValue,callback:function(t){e.dialogValue=t},expression:"dialogValue"}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"100px",rules:e.rules,model:e.form}},[a("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),"post"==e.requestType?a("el-form-item",{attrs:{label:"密码:",prop:"password"}},[a("el-input",{attrs:{maxlength:"32"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名:",prop:"realname"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname",t)},expression:"form.realname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-option",{attrs:{label:"男",value:1}}),e._v(" "),a("el-option",{attrs:{label:"女",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("el-switch",{staticClass:"switchStyle",attrs:{"active-text":"启用","inactive-text":"锁定","active-value":0,"inactive-value":1},model:{value:e.form.locked,callback:function(t){e.$set(e.form,"locked",t)},expression:"form.locked"}})],1)],1)],1),e._v(" "),a("dialog-model",{attrs:{title:"角色分配信息",width:536,type:e.requestType,"loading-button":e.loadingButton2},on:{submit:e.handleRoleUpdate,changeLoadingButton:function(t){e.loadingButton2=!1}},model:{value:e.dialogValueRole,callback:function(t){e.dialogValueRole=t},expression:"dialogValueRole"}},[a("user-role",{model:{value:e.userRoleValue,callback:function(t){e.userRoleValue=t},expression:"userRoleValue"}})],1)],1)],1)},n=[],o=a("db72"),i=a("4f6f"),s=a("a3be"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-transfer",{attrs:{filterable:"","filter-method":e.filterMethod,"filter-placeholder":"请输入角色名称",data:e.data,titles:["角色列表","已选择"]},on:{change:e.changeValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})},u=[],c=(a("7f7f"),{name:"UserRole",props:{value:{type:[Array],default:function(){return[]}}},data:function(){return{data:[],filterMethod:function(e,t){return t.label.indexOf(e)>-1}}},created:function(){var e=this;this.$http.post(s["a"].sys.sysroleList,{page:1,size:1e3}).then(function(t){var a=t.data.data.list;e.data=a.map(function(e){return{label:e.name,key:e.id}})})},methods:{changeValue:function(e){this.$emit("input",e)}}}),d=c,p=a("2877"),m=Object(p["a"])(d,r,u,!1,null,null,null),h=m.exports,f={components:{UserRole:h},data:function(){return{tableHeight:Object(i["c"])(274),dialogValue:!1,requestType:"post",pagination:{page:1,size:10,totalCount:0},QueryParam:{},tableData:[],form:{},multipleSelection:[],rules:{username:[{required:!0,message:"请输入用户名名称"}],password:[{required:!0,message:"请输入密码"}],realname:[{required:!0,message:"请输入真实的姓名"}],phone:[{required:!0,message:"请输入电话号码"}],sex:[{required:!0}]},dialogValueRole:!1,tempSaveUser:"",userRoleValue:[],loadingButton:!1,loadingButton2:!1}},created:function(){this.query()},methods:{query:function(e){var t=this;Object(i["f"])(),1==e&&(this.pagination.page=1);var a=Object(o["a"])({},this.pagination,{},this.QueryParam);this.$http.post(s["a"].sys.sysuserList,a).then(function(e){var a=e.data.data;t.tableData=a.list,t.pagination.size=a.pageSize,t.pagination.totalCount=a.totalCount,Object(i["d"])()}).catch(function(e){Object(i["b"])(e)})},handleSizeChange:function(e){this.pagination.size=e,this.query()},handleCurrentChange:function(e){this.pagination.page=e,this.query()},handleAdd:function(){this.dialogValue=!0,this.requestType="post",this.form={email:"",sex:1,locked:0}},handleEdit:function(e){this.dialogValue=!0,this.requestType="put",this.form=Object(i["a"])(e)},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var a=[];a.push(e.id),t.deleteRequestData(a)}).catch(function(){t.dialogValue=!1})},handleSelectionChange:function(e){this.multipleSelection=e},delAll:function(){var e=this;this.$confirm("此操作将永久删除信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var t=e.multipleSelection.map(function(e){return e.id});e.deleteRequestData(t)}).catch(function(){e.dialogValue=!1})},deleteRequestData:function(e){var t=this;this.$http.delete("".concat(s["a"].sys.sysuser),{data:e}).then(function(e){t.$message.success("删除成功"),t.dialogValue=!1,t.query()}).catch(function(e){t.dialogValue=!1,Object(i["b"])(e)})},handleUpdate:function(e){var t=this;this.$refs.ruleForm.validate(function(a){if(!a)return!1;t.loadingButton=!0,"post"==e?t.$http.post(s["a"].sys.sysuser,t.form).then(function(e){500==e.data.code?(t.$message.info("".concat(e.data.message)),t.loadingButton=!1):(t.dialogValue=!1,t.$message.success("添加成功"),t.query())}).catch(function(e){t.dialogValue=!1,Object(i["b"])(e)}):t.$http.put(s["a"].sys.sysuser,t.form).then(function(e){t.dialogValue=!1,t.$message.success("修改成功"),t.query()}).catch(function(e){t.dialogValue=!1,Object(i["b"])(e)})})},handleEditRole:function(e){var t=this;this.dialogValueRole=!0,this.$http.post(s["a"].sys.queryUserRole,{userId:e.id,userType:0}).then(function(a){var l=a.data.data;t.userRoleValue=l.map(function(e){return e.id}),t.tempSaveUser=e.id}).catch(function(e){t.dialogValueRole=!1,Object(i["b"])(e)})},handleRoleUpdate:function(){var e=this,t={userId:this.tempSaveUser,roleIds:this.userRoleValue,userType:0};this.loadingButton2=!0,this.$http.post(s["a"].sys.sysuserrole,t).then(function(t){"success"==t.data.message&&e.$message.success("成功保存角色信息"),e.dialogValueRole=!1}).catch(function(t){e.dialogValueRole=!1,Object(i["b"])(t)})},switchFlag:function(e,t){var a=this;this.$confirm("是否进行状态管理?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:t.id,locked:t.locked};a.$http.put(s["a"].sys.sysuser,e).then(function(e){a.$message.success("修改成功")}).catch(function(e){Object(i["b"])(e)})}).catch(function(){t.locked?a.tableData[e].locked=0:a.tableData[e].locked=1})},handleReset:function(e){var t=this,a=Object(o["a"])({},e,{password:"123456"});this.$confirm("确认重置该账号的密码！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){t.$http.put(s["a"].sys.sysuser,a).then(function(e){t.$message.success("重置成功")}).catch(function(e){Object(i["b"])(e)})})}}},g=f,b=Object(p["a"])(g,l,n,!1,null,null,null);t["default"]=b.exports}}]);