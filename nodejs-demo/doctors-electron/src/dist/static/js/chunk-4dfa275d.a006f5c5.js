(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dfa275d"],{"244c":function(t,e,a){"use strict";var l=a("dd36"),o=a.n(l);o.a},cf72:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{staticClass:"margin-8 pu-padding",attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 菜单管理\n        ")]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formQuery}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.formQuery.name,callback:function(e){t.$set(t.formQuery,"name",e)},expression:"formQuery.name"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:t.fitler}})],1),t._v(" "),a("el-form-item",{staticClass:"handle-button-right"},[a("el-button",{on:{click:function(e){return t.handleAdd({id:0})}}},[t._v("新增父标签")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:t.tableHeight,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"},"header-row-class-name":"table-header-color"}},[a("el-table-column",{attrs:{prop:"uri",label:"路径",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.type?a("span",[t._v("目录")]):t._e(),t._v(" "),"2"==e.row.type?a("span",[t._v("菜单")]):t._e(),t._v(" "),"3"==e.row.type?a("span",[t._v("按钮")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orders",label:"序号",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"component",label:"页面路径",width:"140","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"value",label:"权限","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{staticClass:"switchStyle",attrs:{disabled:e.row.disabled,"active-text":"启用","inactive-text":"禁用","active-value":0,"inactive-value":1},on:{change:function(a){return t.switchFlag(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"icon",label:"图标",width:"150","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right","header-align":"center",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return["3"!=e.row.type?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleAdd(e.row)}}},[t._v("新增子标签")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"font-color-del",attrs:{type:"text"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("dialog-model",{attrs:{type:t.requestType,title:"菜单信息","loading-button":t.loadingButton},on:{submit:t.handleUpdate,changeLoadingButton:function(e){t.loadingButton=!1}},model:{value:t.dialogValue,callback:function(e){t.dialogValue=e},expression:"dialogValue"}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"80px",rules:t.rules,model:t.form}},[a("el-form-item",{attrs:{label:"路径:"}},[a("el-input",{model:{value:t.form.uri,callback:function(e){t.$set(t.form,"uri",e)},expression:"form.uri"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{attrs:{maxlength:"100"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"类型:",prop:"type"}},[a("el-select",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{label:"目录",value:1}}),t._v(" "),a("el-option",{attrs:{label:"菜单",value:2}}),t._v(" "),a("el-option",{attrs:{label:"按钮",value:3}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图标:"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"页面路径:"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:t.form.component,callback:function(e){t.$set(t.form,"component",e)},expression:"form.component"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"权限:"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态:"}},[a("el-switch",{staticClass:"switchStyle",attrs:{"active-text":"启用","inactive-text":"禁用","active-value":0,"inactive-value":1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"序号:"}},[a("el-input-number",{attrs:{min:0},model:{value:t.form.orders,callback:function(e){t.$set(t.form,"orders",e)},expression:"form.orders"}})],1)],1)],1)],1)],1)},o=[],n=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("4f6f")),s=a("a3be"),i={data:function(){return{switchDg:Boolean,tableHeight:Object(n["c"])(240),dialogValue:!1,requestType:"post",tableData:[],tableDataTemp:[],form:{},formQuery:{},rules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],type:[{required:!0,message:"请选择标签类型",trigger:"change"}]},loadingButton:!1}},created:function(){this.query()},methods:{query:function(){var t=this;Object(n["f"])(),this.$http.post(s["a"].sys.syspermissionList,{page:1,size:1e3}).then(function(e){var a=e.data.data;t.tableData=a.list,t.tableDataTemp=a.list,t.dgg(),Object(n["d"])()}).catch(function(t){Object(n["b"])(t)})},dgg:function(){for(var t=0;t<this.tableData.length;t++)this.switchDg=this.tableData[t].status,this.digbl(this.tableData[t])},digbl:function(t){if(t.children.length)for(var e in t.children)0==this.switchDg&&0==t.status?this.$set(t.children[e],"disabled",!1):this.$set(t.children[e],"disabled",!0),this.digbl(t.children[e])},switchFlag:function(t){var e=this;this.$confirm("是否进行状态管理?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:t.id,status:t.status};e.$http.put(s["a"].sys.syspermission,a).then(function(a){e.$message.success("修改成功"),e.switchDg=t.status,e.digbl(t)}).catch(function(t){Object(n["b"])(t)})}).catch(function(){t.status?e.$set(t,"status",0):e.$set(t,"status",1),e.switchDg=t.status,e.digbl(t)})},handleAdd:function(t){this.dialogValue=!0;var e={pid:t.id+"",status:0,orders:1};this.requestType="post",this.form=e},handleEdit:function(t){this.dialogValue=!0,this.requestType="put",this.form=Object(n["a"])(t)},handleUpdate:function(t){var e=this;this.$refs.ruleForm.validate(function(a){if(!a)return!1;e.loadingButton=!0,"post"==t?e.$http.post(s["a"].sys.syspermission,e.form).then(function(t){e.dialogValue=!1,e.$message.success("添加成功"),e.query()}).catch(function(t){e.dialogValue=!1,Object(n["b"])(t)}):e.$http.put(s["a"].sys.syspermission,e.form).then(function(t){e.dialogValue=!1,e.$message.success("修改成功"),e.query()}).catch(function(t){e.dialogValue=!1,Object(n["b"])(t)})})},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var a=[];a.push(t.id),e.deleteRequestData(a)}).catch(function(){e.dialogValue=!1})},deleteRequestData:function(t){var e=this;this.$http.delete("".concat(s["a"].sys.syspermission),{data:t}).then(function(t){!1===t.data.flag?e.$message.error(t.data.message):e.$message.success("删除成功"),e.dialogValue=!1,e.query()}).catch(function(t){e.dialogValue=!1,Object(n["b"])(t)})},fitler:function(){Object(n["f"])();var t=this.filterTree(this.tableDataTemp,this.shopfilterNode);this.tableData=t,Object(n["d"])()},filterTree:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";if(t&&t.length){var l=[],o=!0,n=!1,s=void 0;try{for(var i,r=t[Symbol.iterator]();!(o=(i=r.next()).done);o=!0){var c=i.value;c=Object.assign({},c);var u=this.filterTree(c[a],e,a);(u&&u.length||e(c))&&(u&&(c[a]=u),l.push(c))}}catch(d){n=!0,s=d}finally{try{o||null==r.return||r.return()}finally{if(n)throw s}}return l.length?l:void 0}},shopfilterNode:function(t){return-1!=t.name.indexOf(this.formQuery.name)}}},r=i,c=(a("244c"),a("2877")),u=Object(c["a"])(r,l,o,!1,null,null,null);e["default"]=u.exports},dd36:function(t,e,a){}}]);