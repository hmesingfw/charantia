(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d212c40"],{aa8b:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{staticClass:"margin-8 pu-padding",attrs:{type:"border-card"},model:{value:t.actionTabs,callback:function(e){t.actionTabs=e},expression:"actionTabs"}},[a("el-tab-pane",{attrs:{name:"list"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),t._v(" 病人信息\n            ")]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.QueryParam}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.QueryParam.sickName,callback:function(e){t.$set(t.QueryParam,"sickName",e)},expression:"QueryParam.sickName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"主治医生"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.QueryParam.docName,callback:function(e){t.$set(t.QueryParam,"docName",e)},expression:"QueryParam.docName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"床号"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.QueryParam.bedNum,callback:function(e){t.$set(t.QueryParam,"bedNum",e)},expression:"QueryParam.bedNum"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(e){return t.query(1)}}}),t._v(" "),a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(e){return t.handleEdit({sex:1},"post")}}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.multipleSelection.length>0,expression:"multipleSelection.length>0"}],attrs:{icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete({})}}})],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:t.tableHeight,"header-row-class-name":"table-header-color"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"42"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sickbedDesc",label:"床号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==e.row.sex?"男":"女"))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"doctorName",label:"主治医生","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"nurseName",label:"责任护士","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"inDate",label:"入院日期","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"outDate",label:"出院日期","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleEdit(e.row,"put")}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleOpenInOut(e.row,"put","out")}}},[t._v("出院")]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"看护项目",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleOpenItem(e.row)}}},[t._v("看护")])],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"出入院历史记录",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.handleInOutList(e.row)}}},[t._v("记录")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pu-pagination"},[a("el-pagination",{attrs:{"current-page":t.pagination.page,"page-sizes":[10,20,30,50],"page-size":t.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),a("dialog-model",{attrs:{title:"信息录入",type:t.requestType,"loading-button":t.loadingButton},on:{submit:t.handleUpdate,changeLoadingButton:function(e){t.loadingButton=!1}},model:{value:t.dialogValue,callback:function(e){t.dialogValue=e},expression:"dialogValue"}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":"right","label-width":"100px",rules:t.rules,model:t.form}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-select",{model:{value:t.form.age,callback:function(e){t.$set(t.form,"age",e)},expression:"form.age"}},t._l(t.patientsAge,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"身份证号码",prop:"cardId"}},[a("el-input",{attrs:{maxlength:"18",placeholder:"为了方便区分身份信息，建议输入身份证号码"},model:{value:t.form.cardId,callback:function(e){t.$set(t.form,"cardId",e)},expression:"form.cardId"}})],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}}),t._v(" "),a("el-form-item",{attrs:{label:"主治医生",prop:"doctorId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.doctorId,callback:function(e){t.$set(t.form,"doctorId",e)},expression:"form.doctorId"}},t._l(t.doctorList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"责任护士",prop:"nurseId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.nurseId,callback:function(e){t.$set(t.form,"nurseId",e)},expression:"form.nurseId"}},t._l(t.nurseTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"床号",prop:"sickbedId"}},[a("el-cascader",{ref:"cascaderref",attrs:{options:t.sickbedList,props:{label:"name",value:"id",emitPath:!1}},on:{change:t.changeSickbed},model:{value:t.form.sickbedId,callback:function(e){t.$set(t.form,"sickbedId",e)},expression:"form.sickbedId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"入院日期",prop:"inDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期时间",align:"right","picker-options":t.pickerOptions},model:{value:t.form.inDate,callback:function(e){t.$set(t.form,"inDate",e)},expression:"form.inDate"}})],1)],1)],1),t._v(" "),a("dialog-model",{attrs:{title:"出入院信息录入",type:t.requestType,"loading-button":t.loadingButton},on:{submit:t.handleInOutUpdate,changeLoadingButton:function(e){t.loadingButton=!1}},model:{value:t.dialoginOutValue,callback:function(e){t.dialoginOutValue=e},expression:"dialoginOutValue"}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("病人信息")]),t._v(" "),a("el-form",{staticStyle:{"padding-bottom":"10px"},attrs:{"label-position":"right","label-width":"100px",model:t.inoutForm}},[a("el-form-item",{attrs:{label:"病人姓名："}},[t._v(t._s(t.inoutForm.name))])],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("入院信息")]),t._v(" "),a("el-form",{ref:"ruleInoutForm",attrs:{"label-position":"right","label-width":"100px",rules:t.rules,model:t.form}},[a("el-form-item",{attrs:{label:"主治医生",prop:"doctorId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",disabled:"out"==t.inoutType},model:{value:t.form.doctorId,callback:function(e){t.$set(t.form,"doctorId",e)},expression:"form.doctorId"}},t._l(t.doctorList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"责任护士",prop:"nurseId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",disabled:"out"==t.inoutType},model:{value:t.form.nurseId,callback:function(e){t.$set(t.form,"nurseId",e)},expression:"form.nurseId"}},t._l(t.nurseTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"床号",prop:"sickbedId"}},[a("el-cascader",{ref:"cascaderref",staticStyle:{width:"100%"},attrs:{disabled:"out"==t.inoutType,options:t.sickbedList,props:{label:"name",value:"id",emitPath:!1}},on:{change:t.changeSickbed},model:{value:t.form.sickbedId,callback:function(e){t.$set(t.form,"sickbedId",e)},expression:"form.sickbedId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"入院日期",prop:"inDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期时间",align:"right","picker-options":t.pickerOptions},model:{value:t.form.inDate,callback:function(e){t.$set(t.form,"inDate",e)},expression:"form.inDate"}})],1),t._v(" "),"in"!=t.inoutType?a("el-form-item",{attrs:{label:"出院日期",prop:"outDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期时间",align:"right","picker-options":t.pickerOptions},model:{value:t.form.outDate,callback:function(e){t.$set(t.form,"outDate",e)},expression:"form.outDate"}})],1):t._e()],1)],1),t._v(" "),a("dialog-model",{attrs:{title:"出入院历史信息",width:"800","loading-button":t.loadingButton},on:{submit:function(e){t.dialoginOutListValue=!1},changeLoadingButton:function(e){t.loadingButton=!1}},model:{value:t.dialoginOutListValue,callback:function(e){t.dialoginOutListValue=e},expression:"dialoginOutListValue"}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("病人信息")]),t._v(" "),a("el-form",{staticStyle:{"padding-bottom":"10px"},attrs:{"label-position":"right","label-width":"100px",model:t.inoutForm}},[a("el-form-item",{attrs:{label:"病人姓名："}},[t._v(t._s(t.inoutForm.name))])],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("历史信息")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataInOutList,height:t.tableHeight,"header-row-class-name":"table-header-color"}},[a("el-table-column",{attrs:{prop:"doctorName",label:"主治医生","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"nurseName",label:"责任护士","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"sickbedDesc",label:"床号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"inDate",label:"入院时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"outDate",label:"出院时间","show-overflow-tooltip":""}})],1)],1),t._v(" "),a("dialog-model",{ref:"refItemDialog",attrs:{title:"看护项目","loading-button":t.loadingButton},on:{submit:t.handleItemUpdate,changeLoadingButton:function(e){t.loadingButton=!1}},model:{value:t.dialogItemValue,callback:function(e){t.dialogItemValue=e},expression:"dialogItemValue"}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("病人信息")]),t._v(" "),a("el-form",{attrs:{"label-position":"right","label-width":"100px",model:t.form,inline:!0}},[a("el-form-item",{attrs:{label:"姓名："}},[t._v(t._s(t.form.name))]),t._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[t._v(t._s(t.form.age))])],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("项目信息")]),t._v(" "),a("el-table",{ref:"multipleTableItem",staticStyle:{width:"100%"},attrs:{data:t.tableItemchild,height:t.tableHeightItem,"header-row-class-name":"table-header-color"},on:{"selection-change":t.handleSelectionItemChange}},[a("el-table-column",{attrs:{type:"selection",width:"42"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"项目名称","show-overflow-tooltip":""}})],1)],1)],1)},l=[],i=(a("96cf"),a("3b8d")),n=(a("ac6a"),a("db72")),r=a("4f6f"),s=a("a3be"),c=a("2f62"),u={computed:Object(n["a"])({},Object(c["c"])({sectionOffice:function(t){return t.enums.sectionOffice},patientsAge:function(t){return t.enums.patientsAge},type:function(t){return t.enums.type},doctor:function(t){return t.enums.doctor},enumval:function(t){return t.enumsValue.enumval}})),data:function(){return{actionTabs:"list",tableHeight:Object(r["c"])(260),tableHeightItem:Object(r["c"])(280),QueryParam:{},tableData:[],multipleSelection:[],pagination:{page:1,size:10,totalCount:0},dialogValue:!1,requestType:"",loadingButton:!1,form:{},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],doctorId:[{required:!0,message:"请选择",trigger:"blur"}],sickbedId:[{required:!0,message:"请选择",trigger:"blur"}],inDate:[{required:!0,message:"请选择",trigger:"blur"}],outDate:[{required:!0,message:"请选择",trigger:"blur"}]},doctorList:[],nurseTypeList:[],sickbedList:[],dialogItemValue:!1,tableItemchild:[],multipleSelectionItem:[],dialoginOutValue:!1,inoutType:"",dialoginOutListValue:!1,tableDataInOutList:[],inoutForm:{},pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},created:function(){this.query(),this.initData()},methods:{deleteRequestData:r["e"],initData:function(){var t=this;this.$http.get(s["a"].sys.doctor,{params:{type:this.enumval.doctor}}).then(function(e){t.doctorList=e.data.data.list}),this.$http.get(s["a"].sys.doctor,{params:{type:this.enumval.nurseType}}).then(function(e){t.nurseTypeList=e.data.data.list}),this.$http.get(s["a"].sys.sickbeds).then(function(e){t.sickbedList=e.data.data}),this.$http.get(s["a"].sys.nurseItems).then(function(e){e.data.data.forEach(function(e){e.children.length>0?e.children.forEach(function(e){t.tableItemchild.push(e)}):t.tableItemchild.push(e)})})},handleSizeChange:function(t){this.pagination.size=t,this.query()},handleCurrentChange:function(t){this.pagination.page=t,this.query()},query:function(t){var e=this;1==t&&(this.pagination.page=1);var a=Object(n["a"])({},this.pagination,{},this.QueryParam);this.$http.get(s["a"].sys.patients2,{params:a}).then(function(t){var a=t.data.data;e.tableData=a.list,e.pagination.size=a.pageSize,e.pagination.totalCount=a.totalCount}).catch(function(t){Object(r["b"])(t)})},handleEdit:function(t,e){this.dialogValue=!0,this.form="post"==e?Object(n["a"])({},Object(r["a"])(t),{inDate:(new Date).Format("yyyy-MM-dd hh:mm:ss")}):Object(n["a"])({},t,{outDate:(new Date).Format("yyyy-MM-dd hh:mm:ss")}),this.requestType=e},handleUpdate:function(){var t=this;this.$refs.ruleForm.validate(function(e){e&&(t.loadingButton=!0,"post"==t.requestType?t.$http.post(s["a"].sys.patient2,t.form).then(function(e){t.dialogValue=!1,t.$message.success(e.data.message),t.query()}).catch(function(e){t.dialogValue=!1,Object(r["b"])(e)}):t.$http.put(s["a"].sys.patient2,t.form).then(function(e){t.dialogValue=!1,t.$message.success(e.data.message),t.query()}).catch(function(e){t.dialogValue=!1,Object(r["b"])(e)}))})},handleOpenInOut:function(t,e,a){this.dialoginOutValue=!0,this.requestType=e,this.inoutForm=t,this.inoutType=a,"post"==e?this.form=Object(n["a"])({},t,{inDate:(new Date).Format("yyyy-MM-dd hh:mm:ss")}):(console.log(t),this.form=Object(n["a"])({},t,{outDate:(new Date).Format("yyyy-MM-dd hh:mm:ss")}))},handleInOutUpdate:function(){var t=this;this.$refs.ruleInoutForm.validate(function(e){e&&(t.loadingButton=!0,"post"==t.requestType?t.$http.post(s["a"].sys.checkIn,t.form).then(function(e){t.dialoginOutValue=!1,t.$message.success(e.data.message),t.query()}).catch(function(e){t.dialoginOutValue=!1,Object(r["b"])(e)}):t.$http.put(s["a"].sys.leave,t.form).then(function(e){t.dialoginOutValue=!1,t.$message.success(e.data.message),t.query()}).catch(function(e){t.dialoginOutValue=!1,Object(r["b"])(e)}))})},changeSickbed:function(t){var e=this.$refs.cascaderref.getCheckedNodes();e.length>0&&this.$set(this.form,"sickbedDesc",e[0].label)},handleInOutList:function(t){var e=this;this.dialoginOutListValue=!0,this.$http.get(s["a"].sys.occupancy,{params:{sickId:t.sickId}}).then(function(t){e.tableDataInOutList=t.data.data}).catch(function(t){Object(r["b"])(t)}),this.inoutForm=t},handleOpenItem:function(t){var e=this;this.dialogItemValue=!0,this.form=t,this.$nextTick(function(){e.$refs.multipleTableItem.clearSelection(),e.$http.get(s["a"].sys.nursing,{params:{sickId:t.id}}).then(function(t){t.data.data.forEach(function(t){e.tableItemchild.forEach(function(a){t.nurseId==a.id&&e.$refs.multipleTableItem.toggleRowSelection(a)})})}).catch(function(t){Object(r["b"])(t)})})},handleItemUpdate:function(){var t=this,e=this.multipleSelectionItem.map(function(e){return{sickId:t.form.id,nurseId:e.id}});0==e.length&&e.push({sickId:this.form.id}),this.$http.post(s["a"].sys.patientItem,e).then(function(e){t.dialogItemValue=!1,t.$message.success(e.data.message)}).catch(function(e){t.dialogItemValue=!1,Object(r["b"])(e)})},handleSelectionItemChange:function(t){this.multipleSelectionItem=t},handleSelectionChange:function(t){this.multipleSelection=t},handleDelete:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=[],e.sickId?a.push(e.sickId):a=this.multipleSelection.map(function(t){return t.sickId}),t.next=4,this.deleteRequestData(s["a"].sys.patient,a);case 4:o=t.sent,o&&this.query();case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}},d=u,m=a("2877"),p=Object(m["a"])(d,o,l,!1,null,null,null);e["default"]=p.exports}}]);