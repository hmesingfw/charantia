<!DOCTYPE html>
<html>

<head>
    <!-- 第一步  引入静态文体 -->
    <meta charset="UTF-8">
    <!-- import static CSS -->
    <link rel="stylesheet" href="./static/css/init.css">
    <link rel="stylesheet" href="./static/css/element.2.7.2.min.css">

    <link rel="stylesheet" href="./css/index.css">
</head>
<style>
    [v-cloak] {
        display: none
    }
</style>

<body>
    <!-- 第三步，编写模版 -->
    <div id="app" v-cloak>
        <!-- 第四步，编写查询表单的呈现与数据绑定 -呈现  -->
        <el-form label-position="right" label-width="100px" :model="formLabelAlign" size="small" class="form-query">
            <el-row>
                <el-col :span="8">
                    <el-form-item label="姓名：">
                        <el-input v-model="formLabelAlign.name"></el-input>
                    </el-form-item>
                </el-col>
                <el-col :span="8">
                    <el-form-item label="性别：">
                        <el-select v-model="formLabelAlign.sex" placeholder="请选择性别" style="width:100%">
                            <el-option label="男" value="1"></el-option>
                            <el-option label="女" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                </el-col>
                <el-col :span="8">
                    <el-form-item label="地址：">
                        <el-input v-model="formLabelAlign.address"></el-input>
                    </el-form-item>
                </el-col>
            </el-row>



        </el-form>
        <!-- 第五步，【查询】方法功能实现   -呈现 -->
        <el-row class="nav-botton">
            <el-button type="primary" icon="el-icon-search" size="small" plain @click="handleQuery">查询</el-button>
            <el-button type="primary" icon="el-icon-edit" size="small" plain @click="handleAdd">新增</el-button>
            <el-button type="primary" icon="el-icon-edit" size="small" plain @click="handleUpdate">修改</el-button>
            <el-button type="primary" icon="el-icon-edit" size="small" plain @click="handleDelete">删除</el-button>
        </el-row>
        <!-- 第六步，表格呈现与数据绑定 -呈现  -->
        <el-table ref="singleTable" :data="tableData" highlight-current-row @current-change="tableRowClick"
            @cell-dblclick="handleDbClick" style="width: 100%" @selection-change="handleSelectionChange">
            <el-table-column type="selection" width="55">
            </el-table-column>
            <el-table-column property="id" label="编号" width="120">
            </el-table-column>
            <el-table-column property="name" label="姓名" width="120">
            </el-table-column>
            <el-table-column property="sex" label="性别" width="120">
                <template slot-scope="scope">
                    {{ scope.row.sex == '1' ? '男' : '女'}}
                </template>

            </el-table-column>
            <el-table-column property="hobby" label="爱好" width="140">
            </el-table-column>
            <el-table-column property="address" label="地址">
            </el-table-column>
        </el-table>

        <!-- 第七步，分页操作 -呈现 -->
        <div class="block nav-page">
            <el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange"
                :current-page="currentPage" :page-sizes="[100, 200, 300, 400]" :page-size="100"
                layout="prev, pager, next, jumper" :total="400">
            </el-pagination>
        </div>

        <!-- 第八步，新增修改表单的呈现与数据绑定（自定义组件） -呈现 -->
        <kt-form title="新增" :form="form" :rules="rulesForm" :dialog="dialogVisible" @close="funcClose">
        </kt-form>
    </div>
</body>
<!-- 第一步  引入静态文体 -->
<!-- import Vue before Element -->
<script src="./static/js/vue.2.6.js"></script>
<!-- import JavaScript -->
<script src="./static/js/element.2.7.2.min.js"></script>
<!-- import mock -->
<script src="./static/js/mock.js"></script>
<!-- import component -->
<script src="./js/component.js"></script>
<script src="./js/data.js"></script>

<script>
    // 第二步 new Vue
    new Vue({
        el: '#app',
        // 第三步，编写data，绑定数据
        data: function () {
            return {
                // 第五步，查询表单的呈现与数据绑定   --  数据绑定
                formLabelAlign: {
                    id: '',
                    name: '',
                    sex: '',
                    hobby: '',
                    address: ''
                }, // 表单查询条件

                /** 第六步，表格呈现与数据绑定 -数据绑定 */
                tableData: [], // 表格展示数据
                tempClickRow: {}, //记录单击时，点击表格的数据
                multipleSelection: {},
                /**  第七步，分页操作 -数据绑定 */
                currentPage: 1, // 分页，页码
                dialogVisible: false, // 弹出框状态

                /** 新增修改表单的呈现与数据绑定（自定义组件） -数据绑定 */
                form: {
                    id: '',
                    name: '',
                    sex: '',
                    hobby: '',
                    address: ''
                }, //添加或者修改时，使用的表单数据信息
                rulesForm: {
                    id: [{
                        required: true,
                        message: '请输入活动名称',
                        trigger: 'blur'
                    }],
                    name: [{
                            required: true,
                            message: '请输入活动名称',
                            trigger: 'blur'
                        },
                        {
                            min: 3,
                            max: 5,
                            message: '长度在 3 到 5 个字符',
                            trigger: 'blur'
                        }
                    ],
                }, // 数据验证
            }
        },
        // 第五步，【查询】方法功能实现 --方法绑定
        methods: {
            /** 点击查询按钮 */
            handleQuery() {
                console.log(this.formLabelAlign);
            },
            /** 点击新增按钮 */
            handleAdd() {
                this.form = {
                    id: '',
                    name: '',
                    sex: '',
                    hobby: '',
                    address: ''
                }
                this.dialogVisible = true;
            },
            /** 点击修改按钮 */
            handleUpdate() {
                this.form = this.tempClickRow;
                this.dialogVisible = true;
            },
            /** 点击删除按钮 */
            handleDelete() {
                console.log(this.multipleSelection)
            },
            /** 双击表格时，打开编辑页面    */
            handleDbClick(val) {
                this.form = val;
                this.dialogVisible = true;
            },
            /** 单击表格时，将数据记录到临时变量中  */
            tableRowClick(val) {
                this.tempClickRow = val;
            },
            handleSelectionChange(val) {
                this.multipleSelection = val;
            },
            setCurrent(row) {
                this.$refs.singleTable.setCurrentRow(row);
            },
            /** 翻页 */
            handleSizeChange(val) {
                console.log('每页1', val);
                this.getTableData();
            },
            /** 切换翻页 */
            handleCurrentChange(val) {
                this.getTableData();
                console.log('当前页: ', val);
            },
            /** 获取数据 */
            getTableData() {
                // ajax()
                this.tableData = getDataList().tableData;
            },
            /** 关闭    自定义的弹框*/
            funcClose(bloen) {
                this.dialogVisible = bloen
            }
        },
        // 页面创建完成后加载
        created() {
            this.getTableData();
        }

    })
</script>

</html>